<div class="container">
  <div class="card">
      <form name="mainform" (ngSubmit)="mainform.form.valid && onsubmit(FabPriService.currentEntry)" #mainform="ngForm" novalidate>
    <div class="row" style="margin-top: 1rem; ">
      <div class="col-2">
          <div class="input-group input-group-sm mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text" id="inputGroup-sizing-sm">ID:</span>
              </div>
              <input class="form-control" type="text" placeholder="{{autoID}}" style="width: 10%;" disabled>
            </div>
      </div>
      <div class="col-2"></div>
      <div class="col-4">
          <div class="input-group input-group-sm mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text" id="inputGroup-sizing-sm">Mail Date:</span>
              </div>
              <input type="text" id="mailDate" name="FabPriService.currentEntry.mailDate" [(ngModel)]="FabPriService.currentEntry.mailDate"
              placeholder="{{today}}" 
             style="width: 33%;" bsDatepicker [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY' }" 
             class="form-control" #mailDate="ngModel" required>
            </div>
      </div>
      <div class="col-4">
          <div class="input-group input-group-sm mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text" id="inputGroup-sizing-sm">Entry Date:</span>
              </div>
              <input type="text" id="entryDate" placeholder="{{today}}" name="FabPriService.currentEntry.entryDate" 
                              [(ngModel)]="FabPriService.currentEntry.entryDate"
                              style="width: 33%;" bsDatepicker [bsConfig]="{ dateInputFormat: 'DD-MM-YYYY' }" 
                              class="form-control" #entryDate="ngModel" required>
            </div>
      </div>
    </div>
    <div class="row" style="margin-top:-0.5rem;">
        <div class="col-6">
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Reference No:</span>
                </div>
                <input type="text" id="refNo" class="form-control" [disabled]="hiddingrefIdandStyleCode"  placeholder="Enter Reference Number"
                name="FabPriService.currentEntry.referenceId" 
                [(ngModel)]="FabPriService.currentEntry.referenceId" #referenceId="ngModel" required>
              </div>
        </div>
        <div class="col-6">
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Size:</span>
                </div>
                <select class="custom-select" id="size" name="FabPriService.currentEntry.size" style="width: 30%"
           [(ngModel)]="FabPriService.currentEntry.size" #size="ngModel" required>
           
              <option value="{{s.size_name}}" *ngFor="let s of allSize">{{s.size_name}}</option>
            </select>
              </div>
        </div>
    </div>
    <div class="row" style="margin-top:-0.5rem;">
        <div class="col-6">
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Buyer Name:</span>
                </div>
                <select class="custom-select" id="buyerName"   name="FabPriService.currentEntry.buyerName" 
                [(ngModel)]="FabPriService.currentEntry.buyerName" #buyerName="ngModel" 
                required>
                  <option value="{{b.name}}" *ngFor="let b of allBuyers">{{b.name}} | Address: {{b.house}},{{b.road}},{{b.area}} </option>
                </select> 
              </div>



        </div>
        <div class="col-6">
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Fabric:</span>
                </div>
                <select class="custom-select" style="width: 30%" id="fabrics" name="FabPriService.currentEntry.fabricPriceInformation[0].fabricType" 
                [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].fabricType" #fabrics="ngModel" required>
                    <option value="{{f.fabric_name}}" *ngFor="let f of allFabricType">GSM-{{f.fabric_name}}</option>
                  </select>
              </div>
        </div>
    </div>
    <h5 style="margin-left: 1rem;margin-top:0rem;margin-bottom:1rem;text-align: center;">Fabric Calculation</h5>
    <div class="row" style="margin-top:-0.5rem;">
        <div class="col-4">
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Style Code:</span>
                </div>
                <input type="text" class="form-control" id="style_code" [disabled]="hiddingrefIdandStyleCode" placeholder="Code"  
                name="FabPriService.currentEntry.fabricPriceInformation[0].styleCode"
              style="text-transform: uppercase;"
                 [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].styleCode" 
                 #styleCode="ngModel" required>
              </div>
        </div>
        <div class="col-4">
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Item Type:</span>
                </div>
                <select class="custom-select" id="itemName" name="FabPriService.currentEntry.fabricPriceInformation[0].itemName"
           [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].itemName" #itemName="ngModel" (click)="selectSwitch(itemName.value)" required>
            <option value="{{i.itemName}}" *ngFor="let i of allItems">{{i.itemName}}</option>
          </select>
              </div>
        </div>
        <div class="col-4">
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Wastage:</span>
                </div>
                <input type="text" class="form-control" id="inputEmail3" minlength="1" placeholder="%" style="width: 30%"
                name="FabPriService.currentEntry.fabricPriceInformation[0].wastePercentage" 
                [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].wastePercentage" required>
              </div>
        </div>
    </div>
    <div class="row" style="margin-top:-0.5rem;">
        <div class="col-4">
            <div class="input-group input-group-sm mb-3" *ngIf="BoysTshirtSelected || JacketSelected">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Chest:</span>
                </div>
                <input type="text"class="form-control" id="chest" minlength="2" placeholder="0"
                name="FabPriService.currentEntry.fabricPriceInformation[0].chestSize" [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].chestSize">
                <select class="custom-select"  name="FabPriService.currentEntry.fabricPriceInformation[0].chestUom" 
                [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].chestUom" required>
                   
                    <option value="{{s.Uom_name}}" *ngFor="let s of allUoM">{{s.Uom_name}}</option>
                  </select>
              </div>
        </div>
        <div class="col-4">
            <div class="input-group input-group-sm mb-3" *ngIf="BoysTshirtSelected || JacketSelected">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Length:</span>
                </div>
                <input type="text"class="form-control" id="length" minlength="2" placeholder="0" 
                name="FabPriService.currentEntry.fabricPriceInformation[0].lengthSize" [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].lengthSize">
                <select class="custom-select"  name="FabPriService.currentEntry.fabricPriceInformation[0].lengthUom" 
                [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].lengthUom" required>
                    
                    <option value="{{s.Uom_name}}" *ngFor="let s of allUoM">{{s.Uom_name}}</option>
                  </select>
              </div>
        </div>
        <div class="col-4">
            <div class="input-group input-group-sm mb-3" *ngIf="BoysTshirtSelected || JacketSelected">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Sleeve:</span>
                </div>
                <input type="text"class="form-control" id="inputPassword3" minlength="2" placeholder="0" 
                                        name="FabPriService.currentEntry.fabricPriceInformation[0].sleeveSize" [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].sleeveSize">
                                        <select class="custom-select" name="FabPriService.currentEntry.fabricPriceInformation[0].sleeveUom" 
                                        [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].sleeveUom" required>
                                          
                                            <option value="{{s.Uom_name}}" *ngFor="let s of allUoM">{{s.Uom_name}}</option>
                                          </select>
              </div>
        </div>
    </div>
    <div class="row" style="margin-top:-0.5rem;">
        
        <div class="col-6">
            <div class="input-group input-group-sm mb-3" *ngIf="BoysTshirtSelected || JacketSelected">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Fabric Weight:</span>
                </div>
                <input type="text" class="form-control"  disabled 
                name="FabPriService.currentEntry.fabricPriceInformation[0].fabricWeight" 
                [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].fabricWeight">kg/per dozen
              </div>
        </div>
        <div class="col-6">
            <button type="button" class="btn btn-outline-info" (click)="calculateFabricWeight()"
            *ngIf="BoysTshirtSelected || JacketSelected || ShortsSelected">
               Calculate
              </button>
        </div>
    </div>
    <h5 style="margin-left: 1rem;margin-top:0rem;margin-bottom:1rem;text-align: center;">Price Calculation</h5>
    <div class="row" style="margin-top:-0.5rem;">
        <div class="col-4">
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Fabric Unit Price:</span>
                </div>
                <input type="text" id="refNo" class="form-control" name="FabPriService.currentEntry.fabricPriceInformation[0].fabricUnitPrice"
                [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].fabricUnitPrice" required> 
              </div>
        </div>
        <div class="col-4">
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Currency:</span>
                </div>
                <select class="custom-select" name="FabPriService.currentEntry.fabricPriceInformation[0].currency" 
                [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].currency" id="Currency"
                 #cur (click)="setCurrency(cur.value)" required>
                  <!-- <option option selected>...</option>    -->
                    <option value="{{i.currencyName}}" selected *ngFor="let i of newcurrency"> {{i.currencyName}}</option>
                </select>
              </div>
        </div>
        <div class="col-4">
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Fabric Total Price:</span>
                </div>
                <input type="text" id="refNo" class="form-control" style="width: 30%" placeholder="0 {{setcurrency}}"
            value="{{FabPriService.currentEntry.fabricPriceInformation[0].fabricTotalPrice}}" disabled>
              </div>
        </div>
    </div>
    <div class="row" style="margin-top:-0.5rem;">
        <div class="col">
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Rim:</span>
                </div>
                <input type="text" id="refNo" class="form-control" style="width: 30%" placeholder="0 {{setcurrency}}"
        name="FabPriService.currentEntry.fabricPriceInformation[0].rimPrice"
            [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].rimPrice" required> 
              </div>
        </div>
        <div class="col">
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">CM:</span>
                </div>
                <input type="text" id="refNo" class="form-control" style="width: 30%" 
                name="FabPriService.currentEntry.fabricPriceInformation[0].cmPrice" placeholder="0 {{setcurrency}}"
                    [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].cmPrice" required>
              </div>
        </div>
        <div class="col">
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Trim:</span>
                </div>
                <input type="text" id="refNo" class="form-control" style="width: 30%" placeholder="0 {{setcurrency}}"
    name="FabPriService.currentEntry.fabricPriceInformation[0].trimPrice"
        [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].trimPrice" required>
              </div>
        </div>
        <div class="col">
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Doc:</span>
                </div>
                <input type="text" id="refNo" class="form-control" style="width: 30%" placeholder="0 {{setcurrency}}"
                name="FabPriService.currentEntry.fabricPriceInformation[0].docPrice"
                    [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].docPrice" required>
              </div>
        </div>
        <div class="col">
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Print:</span>
                </div>
                <input type="text" id="refNo" class="form-control" style="width: 30%" placeholder="0 {{setcurrency}}"
    name="FabPriService.currentEntry.fabricPriceInformation[0].printPrice"
        [(ngModel)]="FabPriService.currentEntry.fabricPriceInformation[0].printPrice" required>
              </div>
        </div>
    </div>
    <div class="row" style="margin-top:-0.5rem;">
        <div class="col-4">
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Per Dozen Price:</span>
                </div>
                <input type="text" id="refNo" class="form-control" style="width: 30%"
         value="{{FabPriService.currentEntry.fabricPriceInformation[0].perDozenPrice}} {{setcurrency}}" readonly=""> 
              </div>
        </div>
        <div class="col-4">
            <div class="input-group input-group-sm mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="inputGroup-sizing-sm">Per Unit Price:</span>
                </div>
                <input type="text" id="refNo" class="form-control" style="width: 30%; "
                value="{{FabPriService.currentEntry.fabricPriceInformation[0].perUnitPrice}} {{setcurrency}}" readonly="">
              </div>
        </div>
        <div class="col-4">
            <button type="button" class="btn btn-outline-info" style="margin-left: 2rem;margin-bottom: 1rem;"
         (click)="calculatePrice()">
            Calculate
           </button>
        </div>
    </div>
    <div class="row" style="margin-top:-0.5rem;margin-bottom:1rem;">
        <div class="col"><button type="submit" class="btn btn-success" style="margin-left: 15rem; "
          [disabled]="mainform.form.pristine || mainform.form.invalid">Save</button>
        </div>
        <div class="col"> <button type="button" class="btn btn-danger" style="margin-left: -1rem;"
          (click)="clearAll()">Clear All</button>
        </div>
    </div>
    <div  class="alert alert-success" role="alert" *ngIf="showsuccessmessageforsubmitting" style="align-content: center">
        Entry Created successfully.
      </div>
      
      <div  class="alert alert-success" role="alert" *ngIf="showeditmessage" style="align-content: center">
        Entry Edited successfully. Data Saved.
      </div>
      <div  class="alert alert-danger" role="alert" *ngIf="serverErrorMessages" style="align-content: center">
        Something went wrong, try again later. Thank you. 
      </div>
      <div class="alert alert-danger" role="alert" *ngIf="showdeletemessage" style="align-content: center;">
          Entry Deleted.
        </div>
</form>
  </div> <br><br><hr>
  <div class="row">
      <div class="col-sm">
      </div>
      <div class="col-sm">
          <h3 style="text-align: center;">Entry Lists</h3>
          <div class="input-group mb-2">
              <div class="input-group-prepend">
                      <div class="input-group-text">Search by Reference:</div>
                    </div>
                    <select class="custom-select" (click)="SearchByReference($event.target.value)" >
                         <option option selected>...</option>   
                        <option value="{{i}}" *ngFor="let i of allReference"> {{i}}</option>
                    </select>
          
        </div>
      </div>
      <div class="col-sm">
      </div>
    </div>
   <br>
   <div class="wrapper">
      <table class="table table-sm" >
    
          <thead>
              <tr>
                  <th scope="col">No.</th>
                  <th scope="col">Ref-ID</th>
                  <th scope="col">Style Code</th>
                  <th scope="col">Fabric amount<br>(kg/dozen)</th>
                  <th scope="col">Fabric Unit Price</th>
                  <th scope="col">Fabric total Price</th>
                  <!-- <th scope="col">RIB</th>
                  <th scope="col">CM</th>
                  <th scope="col">TRIM</th>
                  <th scope="col">Print</th>
                  <th scope="col">DOC</th> -->
                  <th scope="col">Price<br>(per dozen)</th>
                  <th scope="col">Price<br>(Per Unit)</th>
      
              </tr>
          </thead>
          <tbody>
               <tr *ngFor="let p of entryShowList,index as i">
                  <td>{{i+1}}</td>
                  <td>{{p.referenceId}}</td>
                  <td>{{p.styleCode}}</td>
                  <td>{{p.fabricWeight}}</td>
                  <td>{{p.fabricUnitPrice}}</td>
                  <td>{{p.fabricTotalPrice}}</td>
                  <!-- <td>{{p.rimPrice}}</td>
                  <td>{{p.cmPrice}}</td>
                  <td>{{p.trimPrice}}</td>
                  <td>{{p.printPrice}}</td>
                  <td>{{p.docPrice}}</td> -->
                  <td>{{p.perDozenPrice}}</td>
                  <td>{{p.perUnitPrice}}</td>
                  <td>
                      <a class="btn text-success" (click)="onedit(p)">
                          <i class="fa fa-edit"></i>
                      </a>
      
                  </td>
      
                  <td>
                      <a class="btn text-danger" (click)="ondelete(p)" >
                          <i class="fa fa-trash"></i>
                      </a>
                  </td> 
                 
              </tr> 
      
          </tbody>
      </table>
  </div> 
</div>