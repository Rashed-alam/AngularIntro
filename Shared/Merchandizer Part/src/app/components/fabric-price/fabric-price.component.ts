import { Component, OnInit } from '@angular/core';
import { FabricPriceServiceService } from 'src/app/services/fabric-price-service.service';
import { FabricPriceModel } from 'src/app/models/fabric-price.model';
import { NgForm } from '@angular/forms';
import { DatePipe } from '@angular/common';

@Component({
  selector: 'app-fabric-price',
  templateUrl: './fabric-price.component.html',
  styleUrls: ['./fabric-price.component.css']
})
export class FabricPriceComponent implements OnInit {

  allEntry: FabricPriceModel[];
  today: any = Date.now(); 
  autoID: any;

  constructor(public FabPriService: FabricPriceServiceService,
              private DP: DatePipe,) { }

  ngOnInit() {
    const present = this.DP.transform(this.today, "dd-MM-yyyy");
    this.today = present;
    this.getAll();
  }
  //GET FUNCTION
  getAll(){
    this.FabPriService.getAllEntries()
    .subscribe(
      (data: FabricPriceModel[])=>{
        this.allEntry = data;
        console.log(data);
      });
  }

  //POST FUNCTION

  //UPDATE FUNCTION

  //DELETE FUNCTION

  //this part is for fetching the AutoGenerated ID from the database
  getAutoGeneratedID(){
    this.FabPriService.getFabricEntry_ID()
    .subscribe(
      res => {
        this.autoID = res['FabricID'];
      },
      err => {
        console.log(err);
      }); 
     
   }
  

}
